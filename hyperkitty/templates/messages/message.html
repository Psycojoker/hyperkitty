{% load storm %}
{% load gravatar %}

<div class="email_header">
	{% gravatar_img_for_email email.email 40 %}
	<div class="email_author inline-block">
		<span class="name"> <a href="{% url message_index mlist_fqdn=list_address, hashid=email.message_id_hash %}">{{email.sender_name}}</a> </span>
        {% if settings.USE_MOCKUPS %}
		<br />
		<span class="rank">Rank 8</span>
        {% endif %}
	</div>
	<div class="email_date inline-block right">
		<span class="date">{{email.date}}</span>
		<br />
	</div>
</div>

{% if unfolded %}
<div class="first_email_body">
{% else %}
<div class="email_body">
{% endif %}
{{email.content}}
</div>

<ul class="email_info inline" messageid="{{email.message_id_hash}}">
{% if settings.USE_MOCKUPS %}
	<li class="neutral">
		+{{email.likes}}/-{{email.dislikes}}
	</li>
	<li class="voteup">
		<a href="#like"> Like</a>
	</li>
	<li class="votedown">
		<a href="#dislike"> Dislike</a>
	</li>
{% endif %}
{% if email.attachments|count %}
    {% if not unfolded %}
    <li class="attachments">
        <a href="#attachments">{{ email.attachments|count }} attachments</a>
    {% endif %}
        <ul class="attachments-list">
        {% for attachment in email.attachments %}
            <li><a href="{% url message_attachment mlist_fqdn=list_address, hashid=email.message_id_hash, counter=attachment.counter, filename=attachment.name %}">{{attachment.name}}</a>
                ({{attachment.content_type}} &mdash; {{attachment.size|filesizeformat}})
            </li>
        {% endfor %}
        </ul>
    {% if not unfolded %}
    </li>
    {% endif %}
{% endif %}
</ul>


